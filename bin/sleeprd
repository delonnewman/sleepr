#!/usr/bin/env perl
use v5.14;
use Getopt::Long;

use lib qw{ lib };
use Sleepr qw{ within loop now };
use Sleepr::System;

#
# Process CLI options
GetOptions(
    verbose => \my $verbose,
    help    => \my $help
);

if ( $help ) {
    say "Usage: $0 OPTIONS";
    exit 0;
}

loop {
    my $time = now;
    say "Checking for bedtime at $time..." if $verbose;

    within { Sleepr::System->shutdown }
}
